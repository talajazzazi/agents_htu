image_generation_task:
  description: |
    ### Input:
    - **user_query:** {user_query}  
      (The raw content or idea provided by the user, which will be used to generate images using DALL-E 3.)

    ### Task:
    Generate images using DALL-E 3 based on the user_query:
    - Create a **safe, neutral, professional** prompt for DALL-E 3. Focus on generic visuals: abstract illustrations, clean layouts, simple icons, scenery, or straightforward objects. Avoid potentially sensitive topics, violence, controversial subjects, or suggestive wording. Prefer phrases like "professional illustration", "abstract concept", "modern minimalist style".
    - If the user_query is in another language, translate it to English before generating the image.
    - Use the default image_size of "1024x1024" for all generated images.
    - **If the tool returns "CONTENT_POLICY_VIOLATION" or "safety system"**: Do NOT put the error in image_url. Instead, **retry immediately** with a simpler, more generic prompt (e.g. "Professional abstract illustration about [topic] in a clean, modern style", or "Simple [subject] in minimalist design"). Strip any sensitive wording. Call the tool again until you get a valid image URL or a different error.
    - If image generation fails for other reasons, set the image_url to an error message indicating the failure.
    - Generate at least one image based on the user_query.

    IMPORTANT: You must use the dalle3_image_generator tool to generate images. Do not skip image generation. On content policy rejection, always retry with a safer prompt.

    After generating all images, format your response as JSON with the structure specified in expected_output.

  expected_output: >
    Create ONLY JSON Object that represents a list of images based on the following structure, WITHOUT RETURNING '''json''' only start with {:

    A images field, which holds a list of image objects. Each image object in the list should include:

    image_url: A string containing the URL of the generated image (or an error message if generation failed).

    image_size: A string representing the size of the image (e.g., "1024x1024").
  agent: image_generator